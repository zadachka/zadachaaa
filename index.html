<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zadacha</title>
    <style>
        body {font-family: Arial,sans-serif; background:#f5f5f5; margin:0;}
        .header {background:white; padding:16px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ddd;}
        .nav {display:flex; gap:12px;}
        .nav button {background:none; border:none; font-size:14px; cursor:pointer; padding:6px 10px; border-radius:6px; transition:background 0.3s;}
        .nav button.active {background:#007bff; color:white;}
        .content {padding:16px; max-width:600px; margin:0 auto;}
        .task, .profile-card, .withdraw-card {background:white; border-radius:12px; padding:16px; margin-bottom:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
        .task-title {font-weight:bold; margin-bottom:8px; display:flex; align-items:center; gap:6px; font-size:16px;}
        .task-desc {margin-bottom:12px; color:#333; font-size:14px;}
        .task-footer {display:flex; justify-content:space-between; align-items:center;}
        .task-footer span {font-size:13px; color:#555;}
        .start-btn, .withdraw-btn, .back-btn, .check-btn, .tg-btn {
            background-color:#007bff; color:white; padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-size:14px; transition:transform 0.1s, background-color 0.3s;}
        .start-btn:disabled {background:#aaa; cursor:default;}
        .start-btn:hover:not(:disabled), .withdraw-btn:hover:not(:disabled), .back-btn:hover, .check-btn:hover, .tg-btn:hover {background-color:#0056b3;}
        .start-btn:active, .withdraw-btn:active, .back-btn:active, .check-btn:active, .tg-btn:active {transform:scale(0.95);}
        .hidden {display:none;}
        .done-label {display:inline-block; color:#36a82e; background:#e9f9e7; padding:2px 10px; border-radius:8px; margin-top:10px; font-size:13px;}
        .modal-bg {position:fixed; z-index:15; left:0; top:0; right:0; bottom:0; width:100vw; height:100vh; background:rgba(0,0,0,0.26); display:none; align-items:center; justify-content:center;}
        .modal-bg.show {display:flex;}
        .modal {background:#fff; border-radius:16px; padding:24px 16px 16px 16px; max-width:96vw; width:340px; box-shadow:0 8px 36px rgba(0,0,0,0.17); text-align:center; position:relative;}
        .modal input[type="text"], .modal input[type="file"] {width:95%; margin:10px 0 15px 0; padding:6px; font-size:15px; border-radius:7px; border:1px solid #ccc;}
        .modal .close-btn {position:absolute; top:8px; right:12px; background:none; border:none; font-size:22px; color:#777; cursor:pointer;}
        .notify {position:fixed; z-index:40; left:50%; top:40px; transform:translateX(-50%); background:#222; color:#fff; border-radius:14px; padding:10px 20px; font-size:15px; opacity:0; pointer-events:none; transition:opacity 0.3s;}
        .notify.show {opacity:1;}
        .subscribe-modal .modal {padding-top:36px;}
        .subscribe-list {text-align:left; margin:18px 0 18px 0; font-size:15px;}
        .subscribe-list li {margin-bottom:8px;}
        .check-btn, .tg-btn {margin:14px 0 0 0;}
        .withdraw-btn[disabled] {background:#aaa; cursor:default;}
        .withdraw-hint {font-size:13px; color:#d13c3c; margin-top:8px;}
        @media (max-width:480px) {.content {padding:8px;} .task, .profile-card, .withdraw-card, .modal {padding:11px;} .modal {width:98vw;} .start-btn, .withdraw-btn, .back-btn, .check-btn, .tg-btn {padding:7px 9px; font-size:13px;}}
    </style>
</head>
<body>
    <div class="header">
        <h1>‚úÖ Zadacha</h1>
        <div class="nav">
            <button class="tab-btn active" data-tab="tasks">–ó–∞–¥–∞–Ω–∏—è</button>
            <button class="tab-btn" data-tab="profile">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
        </div>
    </div>
    <div class="content">
        <!-- –ó–ê–î–ê–ù–ò–Ø -->
        <div id="tasks-section">
            <div class="task" id="task-card-1">
                <div class="task-title">üîç –ó–∞–¥–∞–Ω–∏–µ 1</div>
                <div class="task-desc">–ù–∞–π–¥–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –∫–æ–º–ø–∞–Ω–∏–∏ ¬´–ö–æ—Å–º–æ–¢–µ—Ö¬ª</div>
                <div class="task-footer">
                    <span>10 –º–∏–Ω ‚Ä¢ 100 ‚ÇΩ</span>
                    <button class="start-btn" id="start-task1">–ù–∞—á–∞—Ç—å ‚Üí</button>
                </div>
            </div>
            <div class="task" id="task-card-2">
                <div class="task-title">üì∑ –ó–∞–¥–∞–Ω–∏–µ 2</div>
                <div class="task-desc">–ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ —Å —É–ª–∏—Ü—ã —Å –ø–æ–≥–æ–¥–æ–π —Å–µ–≥–æ–¥–Ω—è</div>
                <div class="task-footer">
                    <span>5 –º–∏–Ω ‚Ä¢ 150 ‚ÇΩ</span>
                    <button class="start-btn" id="start-task2">–ù–∞—á–∞—Ç—å ‚Üí</button>
                </div>
            </div>
            <div class="task" id="task-card-3">
                <div class="task-title">üßπ –ó–∞–¥–∞–Ω–∏–µ 3</div>
                <div class="task-desc">–û—á–∏—Å—Ç–∏ —Å –æ–±–ª–∞—á–Ω–æ–≥–æ –¥–∏—Å–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ñ–æ—Ç–æ (200 —Ñ–∞–π–ª–æ–≤)</div>
                <div class="task-footer">
                    <span>7 –º–∏–Ω ‚Ä¢ 700 ‚ÇΩ</span>
                    <button class="start-btn" id="start-task3" disabled>–ù–∞—á–∞—Ç—å ‚Üí</button>
                </div>
            </div>
        </div>
        <!-- –õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢ -->
        <div id="profile-section" class="hidden">
            <div class="profile-card">
                <h2>üë§ –ü—Ä–∏–≤–µ—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                <p class="profile-info">–ë–∞–ª–∞–Ω—Å: <strong id="profile-balance">0 ‚ÇΩ</strong></p>
                <p class="profile-info">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–π: <strong id="profile-tasks">0</strong></p>
                <button class="withdraw-btn" id="go-withdraw" disabled>–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
                <div class="withdraw-hint" id="withdraw-hint" style="display:none;">
                    –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ ‚Äî 1000 ‚ÇΩ
                </div>
            </div>
        </div>
        <!-- –í–´–í–û–î –°–†–ï–î–°–¢–í -->
        <div id="withdraw-section" class="hidden">
            <div class="withdraw-card">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –≤—ã–≤–æ–¥–∞</h2>
                <div class="withdraw-option">üí≥ –í—ã–≤–µ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—É</div>
                <div class="withdraw-option">üéÅ –ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞ Wildberries</div>
                <div class="withdraw-option">üéÆ –ë–∞–ª–∞–Ω—Å Steam</div>
                <button class="back-btn" id="back-profile">‚Üê –ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>
    <!-- –ú–û–î–ê–õ–ö–ò –ó–ê–î–ê–ù–ò–ô -->
    <div class="modal-bg" id="modal-task1">
        <div class="modal">
            <button class="close-btn" id="close-modal-task1">&times;</button>
            <div class="task-title">üîç –ó–∞–¥–∞–Ω–∏–µ 1</div>
            <div style="font-size:15px; margin:5px 0 10px 0;">–ù–∞–π–¥–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –∫–æ–º–ø–∞–Ω–∏–∏ ¬´–ö–æ—Å–º–æ–¢–µ—Ö¬ª –∏ –≤—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∏–∂–µ:</div>
            <input type="text" id="task1-url" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç">
            <button class="start-btn" id="submit-task1">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>
    <div class="modal-bg" id="modal-task2">
        <div class="modal">
            <button class="close-btn" id="close-modal-task2">&times;</button>
            <div class="task-title">üì∑ –ó–∞–¥–∞–Ω–∏–µ 2</div>
            <div style="font-size:15px; margin:5px 0 10px 0;">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ —É–ª–∏—Ü—ã —Å –ø–æ–≥–æ–¥–æ–π —Å–µ–≥–æ–¥–Ω—è:</div>
            <input type="file" id="task2-photo" accept="image/*">
            <button class="start-btn" id="submit-task2">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>
    <div class="modal-bg" id="modal-task3">
        <div class="modal">
            <button class="close-btn" id="close-modal-task3">&times;</button>
            <div class="task-title">üßπ –ó–∞–¥–∞–Ω–∏–µ 3</div>
            <div style="font-size:15px; margin:5px 0 10px 0;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —É–¥–∞–ª–∏–ª–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ–æ—Ç–æ (200 —Ñ–∞–π–ª–æ–≤):</div>
            <input type="text" id="task3-confirm" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ: –ì–æ—Ç–æ–≤–æ, —É–¥–∞–ª–∏–ª!">
            <button class="start-btn" id="submit-task3">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>
    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–û–î–ü–ò–°–ö–ò -->
    <div class="modal-bg subscribe-modal" id="modal-subscribe">
        <div class="modal">
            <div style="font-size:18px; font-weight:bold; margin-bottom:5px;">–î–æ—Å—Ç—É–ø –∫ 3 –∑–∞–¥–∞–Ω–∏—é</div>
            <ul class="subscribe-list" id="subscribe-list">
                <li>1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—à–µ–≥–æ Telegram-–±–æ—Ç–∞</li>
                <li>2. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –≤—Å–µ –∫–∞–Ω–∞–ª—ã</li>
                <li>3. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –æ—Ç –±–æ—Ç–∞</li>
                <li>4. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ —Å—é–¥–∞</li>
            </ul>
            <!-- –ó–¥–µ—Å—å –Ω—É–∂–Ω–∞—è —Å—Å—ã–ª–∫–∞! -->
            <a href="https://t.me/zzadacha_bot?start=subscribe" target="_blank" class="tg-btn" style="margin-bottom:10px;">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–¥–ø–∏—Å–∫–µ</a>
            <input type="text" id="access-code-input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞">
            <button class="check-btn" id="check-access-code">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥</button>
        </div>
    </div>
    <div class="notify" id="notify"></div>
    <script>
        let tasksDone = [false, false, false];
        let taskPays = [100, 150, 700];
        let balance = 0;
        let doneTasks = 0;
        let canOpenThirdTask = false;

        function updateProfile() {
            document.getElementById("profile-balance").innerText = balance + " ‚ÇΩ";
            document.getElementById("profile-tasks").innerText = doneTasks;
            const withdrawBtn = document.getElementById("go-withdraw");
            const hint = document.getElementById("withdraw-hint");
            if (balance >= 1000) {
                withdrawBtn.disabled = false;
                hint.style.display = "none";
            } else {
                withdrawBtn.disabled = true;
                hint.style.display = "block";
            }
        }

        function setTaskDone(idx) {
            tasksDone[idx] = true;
            const card = document.getElementById("task-card-" + (idx+1));
            if (!card.querySelector('.done-label')) {
                const label = document.createElement('div');
                label.className = 'done-label';
                label.innerText = '–í—ã–ø–æ–ª–Ω–µ–Ω–æ!';
                card.appendChild(label);
            }
            document.getElementById("start-task"+(idx+1)).disabled = true;
        }

        function showNotify(message) {
            const notify = document.getElementById("notify");
            notify.textContent = message;
            notify.classList.add("show");
            setTimeout(() => {notify.classList.remove("show");}, 2500);
        }

        function showModal(id) {
            document.getElementById(id).classList.add("show");
        }
        function closeModal(id) {
            document.getElementById(id).classList.remove("show");
        }

        // Tabs
        const tabButtons = document.querySelectorAll(".tab-btn");
        const tasksSection = document.getElementById("tasks-section");
        const profileSection = document.getElementById("profile-section");
        const withdrawSection = document.getElementById("withdraw-section");
        const goWithdraw = document.getElementById("go-withdraw");
        const backProfile = document.getElementById("back-profile");

        tabButtons.forEach(button => {
            button.addEventListener("click", () => {
                tabButtons.forEach(btn => btn.classList.remove("active"));
                button.classList.add("active");
                tasksSection.classList.add("hidden");
                profileSection.classList.add("hidden");
                withdrawSection.classList.add("hidden");
                if (button.dataset.tab === "tasks") tasksSection.classList.remove("hidden");
                else profileSection.classList.remove("hidden");
            });
        });
        goWithdraw && goWithdraw.addEventListener("click", () => {
            profileSection.classList.add("hidden");
            withdrawSection.classList.remove("hidden");
        });
        backProfile && backProfile.addEventListener("click", () => {
            withdrawSection.classList.add("hidden");
            profileSection.classList.remove("hidden");
        });

        // –ú–æ–¥–∞–ª–∫–∏ –ø–æ –∑–∞–¥–∞–Ω–∏—è–º
        document.getElementById("start-task1").addEventListener("click", () => {
            if (!tasksDone[0]) showModal("modal-task1");
        });
        document.getElementById("close-modal-task1").addEventListener("click", () => closeModal("modal-task1"));
        document.getElementById("submit-task1").addEventListener("click", () => {
            if (tasksDone[0]) return;
            const url = document.getElementById("task1-url").value.trim();
            if (url === "" || !url.startsWith("http")) {
                showNotify("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç.");
                return;
            }
            balance += taskPays[0];
            doneTasks += 1;
            updateProfile();
            showNotify("–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –ù–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å –∑–∞—á–∏—Å–ª–µ–Ω–æ 100 ‚ÇΩ");
            setTaskDone(0);
            closeModal("modal-task1");
            document.getElementById("task1-url").value = "";
            checkAfterTwoTasks();
        });

        document.getElementById("start-task2").addEventListener("click", () => {
            if (!tasksDone[1]) showModal("modal-task2");
        });
        document.getElementById("close-modal-task2").addEventListener("click", () => closeModal("modal-task2"));
        document.getElementById("submit-task2").addEventListener("click", () => {
            if (tasksDone[1]) return;
            const fileInput = document.getElementById("task2-photo");
            if (fileInput.files.length === 0) {
                showNotify("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é.");
                return;
            }
            balance += taskPays[1];
            doneTasks += 1;
            updateProfile();
            showNotify("–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –ù–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å –∑–∞—á–∏—Å–ª–µ–Ω–æ 150 ‚ÇΩ");
            setTaskDone(1);
            closeModal("modal-task2");
            fileInput.value = "";
            checkAfterTwoTasks();
        });

        document.getElementById("start-task3").addEventListener("click", () => {
            if (!tasksDone[2] && canOpenThirdTask) showModal("modal-task3");
        });
        document.getElementById("close-modal-task3").addEventListener("click", () => closeModal("modal-task3"));
        document.getElementById("submit-task3").addEventListener("click", () => {
            if (tasksDone[2]) return;
            const confirmInput = document.getElementById("task3-confirm").value.trim();
            if (confirmInput.length < 2) {
                showNotify("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.");
                return;
            }
            balance += taskPays[2];
            doneTasks += 1;
            updateProfile();
            showNotify("–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –ù–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å –∑–∞—á–∏—Å–ª–µ–Ω–æ 700 ‚ÇΩ");
            setTaskDone(2);
            closeModal("modal-task3");
            document.getElementById("task3-confirm").value = "";
        });

        function checkAfterTwoTasks() {
            if (tasksDone[0] && tasksDone[1] && !canOpenThirdTask) {
                showModal("modal-subscribe");
            }
        }
        // ====== –ö–û–î –î–û–°–¢–£–ü–ê –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è ======
        const SECRET_CODE = "ZADACHA2024"; // —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ —É –±–æ—Ç–∞!

        document.getElementById("check-access-code").addEventListener("click", () => {
            const code = document.getElementById("access-code-input").value.trim();
            if (code.toUpperCase() === SECRET_CODE) {
                canOpenThirdTask = true;
                closeModal("modal-subscribe");
                showNotify("–î–æ—Å—Ç—É–ø –∫ 3 –∑–∞–¥–∞–Ω–∏—é –æ—Ç–∫—Ä—ã—Ç!");
                document.getElementById("start-task3").disabled = false;
            } else {
                showNotify("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞!");
            }
        });

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        updateProfile();
    </script>
</body>
</html>
